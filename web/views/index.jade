doctype html
html
  head
    title Keep Right!
    script(src="/javascripts/jquery-2.0.3.min.js")
    script(src="/javascripts/leaflet.js")
    link(rel='stylesheet', href='/stylesheets/leaflet.css')
    link(rel='stylesheet', href='/stylesheets/style.css')
  body
    
    #page(style='width: 100%; height: 100%; margin: 0 auto;')
      #panelContainer
        include sidebar

      //-Handles Selection
      Script.
        $('.mainButton').click(function(){
          var ID = $(this).attr('id');
          
          //- [0] returns true if id and class exist
          if ($('#' + ID + '.buttonImage')[0]){
            $('#' + ID + '.buttonImage').replaceWith('<div id="' + ID + '" class="selectedButtonImage"></div>');
          } else {
            console.log('here');
            $('#' + ID + '.selectedButtonImage').replaceWith('<div id="' + ID + '" class="buttonImage"></div>');
          }
        });

      //- Handles Collapsed Selections
      Script.
        $('.expandButton').click(function() {

          var ID = $(this).attr('id');
          var position = $(this).position();
          var scrollLoc = $('#errorContainer').scrollTop();

          if ($('#' + ID + '.expandSlider').height() == 0) {
            $('#' + ID + '.expandSlider').css('border-width','1px');
            $('#' + ID + '.buttonContainer').css('border-bottom-left-radius', '0px');
            $('#' + ID + '.buttonContainer').css('border-bottom-right-radius','0px');
             

            $('#' + ID + '.expandSlider').animate({height: '150px'}, {
              complete: function() {
                $('#' + ID + '.expandPane').css('display','inline');
              }});
            
            if (position.top > $(document).height()/2){
              $('#errorContainer').animate({scrollTop: scrollLoc + 150});
            }

          } else {
            $('#' + ID + '.expandPane').css('display','none');
            $('#' + ID + '.expandSlider').animate({height: '0px'}, {
              complete: function() {
                $('#' + ID + '.expandSlider').css('border-width','0px');
                $('#' + ID + '.buttonContainer').css('border-bottom-left-radius', '3px');
                $('#' + ID + '.buttonContainer').css('border-bottom-right-radius','3px');
            }});
            if (position.top > $(document).height()/2){
              $('#errorContainer').animate({scrollTop: scrollLoc - 150});
            } 
        }});

      //- Handles Information Pane Expansion
      Script.
        $('.infoButton').click(function() {

          var ID = $(this).attr('id');
          var position = $(this).position();
          var scrollLoc = $('#errorContainer').scrollTop();

          if ($('#' + ID + '.infoSlider').height() == 0) {
            $('#' + ID + '.infoSlider').css('border-width','1px');
            $('#' + ID + '.buttonContainer').css('border-bottom-left-radius', '0px');
            $('#' + ID + '.buttonContainer').css('border-bottom-right-radius','0px');
                    
            $('#' + ID + '.infoSlider').animate({height: '150px'}, {
              complete: function() {
                $('#' + ID + '.infoText').css('visibility','visible');
              }});
                     
            if (position.top > $(document).height()/2){
              $('#errorContainer').animate({scrollTop: scrollLoc + 150});
            }
             
          } else {
            $('#' + ID + '.infoText').css('visibility','hidden');
            $('#' + ID + '.infoSlider').animate({height: '0px'}, {
              complete: function() {
                $('#' + ID + '.infoSlider').css('border-width','0px');
                $('#' + ID + '.buttonContainer').css('border-bottom-left-radius', '3px');
                $('#' + ID + '.buttonContainer').css('border-bottom-right-radius','3px');
            }});
            if (position.top > $(document).height()/2){
              $('#errorContainer').animate({scrollTop: scrollLoc - 150});
            } 
            
        }});
              
      #mapContainer(style='float: right; width: 75%; height: 100%;')

        script.
          var map = new L.Map('mapContainer').setView([0, 0], 2);
          // add an OpenStreetMap tile layer
          L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}).addTo(map);
